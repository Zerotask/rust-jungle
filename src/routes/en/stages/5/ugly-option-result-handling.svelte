<script lang="ts">
	import Lesson from '$components/lesson.svelte';
</script>

<Lesson
	index={8}
	title="Ugly Option / Result Handling"
	previous="error-handling"
	next="vectors"
	src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&code=fn%20do_something_that_might_fail(i%3A%20i32)%20-%3E%20Result%3Cf32%2C%20String%3E%20%7B%0A%20%20%20%20if%20i%20%3D%3D%2042%20%7B%0A%20%20%20%20%20%20%20%20Ok(13.0)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20Err(String%3A%3Afrom(%22this%20is%20not%20the%20right%20number%22))%0A%20%20%20%20%7D%0A%7D%0A%0Afn%20main()%20-%3E%20Result%3C()%2C%20String%3E%20%7B%0A%20%20%20%20%2F%2F%20concise%20but%20assumptive%20and%20gets%20ugly%20fast%0A%20%20%20%20let%20v%20%3D%20do_something_that_might_fail(42).unwrap()%3B%0A%20%20%20%20println!(%22found%20%7B%7D%22%2C%20v)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20this%20will%20panic!%0A%20%20%20%20let%20v%20%3D%20do_something_that_might_fail(1).unwrap()%3B%0A%20%20%20%20println!(%22found%20%7B%7D%22%2C%20v)%3B%0A%20%20%20%20%0A%20%20%20%20Ok(())%0A%7D%0A"
>
	<p>
		Working with <code>Option</code> / <code>Result</code> can be tedious when you are just trying
		to write some quick code. Both <code>Option</code> and <code>Result</code> have a function
		called <code>unwrap</code> that can be useful for getting a value in a quick and dirty manner.
		<code>unwrap</code> will:
	</p>
	<ol>
		<li>Get the value inside Option/Result</li>
		<li>If the enum is of type None/Err, <code>panic!</code></li>
	</ol>

	<p>These two pieces of code are equivalent:</p>

	<pre>
        <code>
my_option.unwrap();

match my_option () { '{'}
    Some(v) => v,
    None => panic!("some error message generated by Rust!"),
{ '}'}
        </code>
    </pre>

	<p>Similarly:</p>

	<pre>
        <code>
my_result.unwrap();

match my_result  () { '{'}
    Ok(v) => v,
    Err(e) => panic!("some error message generated by Rust!"),
{ '}'}
        </code>
    </pre>

	<p>Be a good rustacean and properly use <code>match</code> when you can!</p>
</Lesson>
